select * from chequera;

--CREAR CHEQUERA
CREATE OR REPLACE PROCEDURE CREAR_CHEQUERA(
    P_NO_CHEQUES IN NUMBER,
    P_FECHA_EMISION IN DATE,
    P_ESTADO IN VARCHAR2,
    P_CUENTA_COD_CUENTA IN NUMBER,
    P_ULTIMO_CHEQUE IN NUMBER
)IS
 INDICE NUMBER:=1;
BEGIN
    INSERT INTO chequera(NO_CHEQUES,FECHA_EMISION,ESTADO,CUENTA_COD_CUENTA,ULTIMO_CHEQUE)
    VALUES(P_NO_CHEQUES,P_FECHA_EMISION,P_ESTADO,P_CUENTA_COD_CUENTA,P_ULTIMO_CHEQUE);
    INDICE:=INDICE+P_ULTIMO_CHEQUE-P_NO_CHEQUES;
    FOR a IN 1 .. P_NO_CHEQUES LOOP
        INSERT INTO CHEQUE(FECHA,MONTO,ESTADO,LOTE_COD_LOTE,CHEQUERA_COD_CHEQUERA,FIRMA,NUMERO)
        VALUES(P_FECHA_EMISION,0,'GENERADO',NULL,(SELECT * FROM(SELECT COD_CHEQUERA FROM CHEQUERA ORDER BY COD_CHEQUERA DESC)WHERE ROWNUM=1),'',INDICE);
        INDICE:=INDICE+1;
    END LOOP;
    COMMIT;
END CREAR_CHEQUERA;



SELECT * FROM CHEQUE;

SELECT * FROM CHEQUERA;